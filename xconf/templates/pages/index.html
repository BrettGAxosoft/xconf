{% extends "base.html" %}
{% load i18n mezzanine_tags %}

{% block meta_title %}{% trans "Home" %}{% endblock %}
{% block title %}{% trans "Home" %}{% endblock %}

{% block breadcrumb_menu %}
<li class="active">{% trans "Home" %}</li>
{% endblock %}

{% block extra_css %}
  <link type="text/less" rel="stylesheet" href="{{ STATIC_URL }}css/font-awesome.less" charset="utf-8">
{% endblock %}

{% block extra_js %}
    <script type='text/javascript' src="{{ STATIC_URL }}js/xconf.js"></script>
{% endblock %}
{% block navigation %}
  <li ng-repeat="category in categories.results" class="[[isCurrentPage(category)]] nav-item page-[[category.id]]">
    <a href="#[[category.hyphanizedTitle]]" ng-click="switchTalks(category)">[[category.title]]</a>
  </li>
{% endblock %}

{% block main %}
  <input name="csrfmiddlewaretoken" value="{{ csrf_token }}" type="hidden"/>
  <section id="home" class="page">
    <div class="hero-unit">
      <h1>XConf</h1>
      <p>S03E01</p>
    </div>

    <div class="description container-fluid">
      <div class="row-fluid">
        <div class="span4">
          <h2>Share</h2>
          <p>A platform for Thoughtworkers to share their learnings, their views and their experiences. Be it about technology, or otherwise. The intent to share is what counts!</p>
        </div>
        <div class="span4">
          <h2>Learn</h2>
          <p>Learn from ThoughtWorkers from across India. Learn from their experiences. Learn from their mistakes. Learn from the best.</p>
        </div>
        <div class="span4">
          <h2>Interact</h2>
          <p>XConf is your chance to interact with not ThoughtWorkers from all over. When a group of ThoughtWorkers comes together, you know what happens!</p>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="page-header">
        <h1>This is your chance to have a say on what you want to hear and learn at XConf S03E01</h1>
        <p>Vote for the talks that you would like to hear at XConf S03E01. Talks are categorized as below. You get three votes per category. So get voting!</p>
        <p>Note: We haven't included speaker details so that the vote is on the talk rather than a speaker.</p>
      </div>
      <div class="row-fluid categories">
        <div class="span3 page-2">
          <div class="hero-unit">
            <h2 class="text-center">Lightning Talks</h2>
            <p>Quick and crisp - talks for 6 minutes that pack a punch!</p>
          </div>
        </div>
        <div class="span3 page-4">
          <div class="hero-unit">
            <h2 class="text-center">My First Year @ TW</h2>
            <p>TWers who joined us in the last year share their ThougthWorks experience</p>
          </div>
        </div>
        <div class="span3 page-1">
          <div class="hero-unit">
            <h2 class="text-center">Presentations</h2>
            <p>Normal presentations that span 45 minutes</p>
          </div>
        </div>
        <div class="span3 page-3">
          <div class="hero-unit">
            <h2 class="text-center">Workshops</h2>
            <p>For those who want to get their hands dirty actually doing things</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="[[category.hyphanizedTitle]]" class="page page-[[category.id]] " ng-repeat="category in categories.results">
    <div class="container-fluid">
      <div class="row-fluid">   
        <div class="span12">
          <a class="carousel-control left" ng-click="previousPage(category)" ng-show="previousAvailable">
            <span class="icon-angle-left"></span>
          </a>
          <a class="carousel-control right" ng-click="nextPage(category)" ng-show="nextAvailable">
            <span class="icon-angle-right"></span>
          </a>
          <div>
            <h2 class="pull-left topic-title">[[category.title]]</h2>
            <div class="votes" ng-show="userVotes.results">
              <div class="btn-group dropdown">
                <button class="btn">Votes ([[userVotes.results.length]])</button>
                    <button class="btn dropdown-toggle" data-toggle="dropdown">
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li ng-repeat="vote in userVotes.results">
                    <a>
                      [[vote.talk.title]]
                      <i class="vote icon-remove" ng-click="unvote(vote.talk, category)"></i>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="row-fluid talks">
            <div class="span3" ng-repeat="talk in talks.results | limitTo:4">
              <div class="hero-unit">
                <div>
                  <i class="pull-right row vote icon-thumbs-up" ng-click="toggleVote(talk, category)" ng-class="{'voted': hasVoted(talk)}"></i>
                  <h3 class="hover text-center" ng-click="showTalkDetails(talk, category)">[[talk.title]]</h3>
                </div>
                <p>[[talk.description]]</p>
              </div>
            </div>
          </div>

          <div class="row-fluid talks">
            <div class="span3" ng-repeat="talk in talks.results | startFrom:4">
              <div class="hover hero-unit">
                <div>
                  <i class="pull-right row vote icon-thumbs-up" ng-click="toggleVote(talk, category)" ng-class="{'voted': hasVoted(talk)}"></i>
                  <h3 class="hover text-center" ng-click="showTalkDetails(talk, category)">[[talk.title]]</h3>
                </div>
                <p>[[talk.description]]</p>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

  </section>

<div id="talk-details" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <i class="pull-right row vote icon-thumbs-up" ng-click="toggleVote(currentTalk, currentCategory)" ng-class="{'voted': hasVoted(currentTalk)}"></i>
    <!--<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>-->
    <h3 id="myModalLabel">[[currentTalk.title]]</h3>
  </div>
  <div class="modal-body">
    <p>[[currentTalk.description]]</p>
  </div>
</div>

{% endblock %}
